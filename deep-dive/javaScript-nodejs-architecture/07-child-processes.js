/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * NODE.JS ARCHITECTURE - FILE 7: CHILD PROCESSES
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *
 * Deep dive into Node.js Child Processes - spawning external processes,
 * running shell commands, and communicating with other programs.
 */

console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
console.log("       NODE.JS CHILD PROCESSES - EXTERNAL PROCESS MANAGEMENT        ");
console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n");

/**
 * â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
 * â•‘                    CHILD PROCESSES OVERVIEW                                â•‘
 * â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
 * â•‘                                                                            â•‘
 * â•‘  Node.js can spawn child processes to:                                     â•‘
 * â•‘  â€¢ Run shell commands (ls, git, npm, etc.)                                â•‘
 * â•‘  â€¢ Execute external programs                                               â•‘
 * â•‘  â€¢ Run Node.js scripts in separate processes                               â•‘
 * â•‘  â€¢ Communicate with other languages (Python, Java, etc.)                   â•‘
 * â•‘                                                                            â•‘
 * â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
 * â•‘  â”‚                      Node.js Process (Parent)                        â”‚  â•‘
 * â•‘  â”‚                                                                      â”‚  â•‘
 * â•‘  â”‚  const { spawn, exec, fork } = require('child_process');            â”‚  â•‘
 * â•‘  â”‚                                                                      â”‚  â•‘
 * â•‘  â”‚              â”‚                â”‚                â”‚                     â”‚  â•‘
 * â•‘  â”‚              â–¼                â–¼                â–¼                     â”‚  â•‘
 * â•‘  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚  â•‘
 * â•‘  â”‚         â”‚ spawn  â”‚       â”‚  exec  â”‚       â”‚  fork  â”‚                â”‚  â•‘
 * â•‘  â”‚         â”‚        â”‚       â”‚        â”‚       â”‚        â”‚                â”‚  â•‘
 * â•‘  â”‚         â”‚  ls    â”‚       â”‚ shell  â”‚       â”‚ node   â”‚                â”‚  â•‘
 * â•‘  â”‚         â”‚ python â”‚       â”‚ cmd    â”‚       â”‚ script â”‚                â”‚  â•‘
 * â•‘  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â•‘
 * â•‘  â”‚          Stream           Buffer           IPC                      â”‚  â•‘
 * â•‘  â”‚          output           output           Channel                  â”‚  â•‘
 * â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
 * â•‘                                                                            â•‘
 * â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

const { spawn, exec, execFile, fork, execSync, spawnSync } = require('child_process');
const path = require('path');

console.log("1ï¸âƒ£  CHILD PROCESS METHODS COMPARISON\n");

console.log(`
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHILD PROCESS METHODS                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Method       â”‚ Shell â”‚ Output â”‚ Best For                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  spawn()      â”‚  No   â”‚ Stream â”‚ Long-running processes, large output      â”‚
â”‚  exec()       â”‚  Yes  â”‚ Buffer â”‚ Quick commands, small output              â”‚
â”‚  execFile()   â”‚  No   â”‚ Buffer â”‚ Execute file directly (more secure)       â”‚
â”‚  fork()       â”‚  No   â”‚ IPC    â”‚ Run Node.js scripts with messaging        â”‚
â”‚                                                                              â”‚
â”‚  Synchronous variants:                                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
â”‚  spawnSync()  â”‚  No   â”‚ Buffer â”‚ Blocking spawn                             â”‚
â”‚  execSync()   â”‚  Yes  â”‚ Buffer â”‚ Blocking exec                              â”‚
â”‚  execFileSync â”‚  No   â”‚ Buffer â”‚ Blocking execFile                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`);


/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *                              SPAWN
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

console.log("â•".repeat(70));
console.log("2ï¸âƒ£  spawn() - STREAM-BASED OUTPUT\n");

/**
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                         spawn() ARCHITECTURE                               â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚                                                                            â”‚
 * â”‚   Node.js Process                       Child Process                      â”‚
 * â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
 * â”‚   â”‚                      â”‚              â”‚                      â”‚          â”‚
 * â”‚   â”‚  const child =       â”‚              â”‚      Command         â”‚          â”‚
 * â”‚   â”‚  spawn('ls', ['-la'])â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    (ls, python,      â”‚          â”‚
 * â”‚   â”‚                      â”‚   creates    â”‚     ffmpeg, etc.)    â”‚          â”‚
 * â”‚   â”‚                      â”‚              â”‚                      â”‚          â”‚
 * â”‚   â”‚  child.stdout â—„â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€ stdout          â”‚          â”‚
 * â”‚   â”‚  (Readable Stream)   â”‚   Stream     â”‚   (process output)   â”‚          â”‚
 * â”‚   â”‚                      â”‚              â”‚                      â”‚          â”‚
 * â”‚   â”‚  child.stderr â—„â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€ stderr          â”‚          â”‚
 * â”‚   â”‚  (Readable Stream)   â”‚   Stream     â”‚   (error output)     â”‚          â”‚
 * â”‚   â”‚                      â”‚              â”‚                      â”‚          â”‚
 * â”‚   â”‚  child.stdin â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â–º stdin          â”‚          â”‚
 * â”‚   â”‚  (Writable Stream)   â”‚   Stream     â”‚   (process input)    â”‚          â”‚
 * â”‚   â”‚                      â”‚              â”‚                      â”‚          â”‚
 * â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
 * â”‚                                                                            â”‚
 * â”‚   Key Features:                                                            â”‚
 * â”‚   â€¢ NO shell involved (direct execution)                                  â”‚
 * â”‚   â€¢ Streaming output (memory efficient)                                   â”‚
 * â”‚   â€¢ Best for long-running processes                                       â”‚
 * â”‚                                                                            â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */

console.log("=== spawn() Examples ===\n");

// Example 1: Basic spawn
console.log("// Basic spawn - list files");
console.log(`
const { spawn } = require('child_process');

const ls = spawn('ls', ['-la', '/tmp']);

ls.stdout.on('data', (data) => {
  console.log(\`stdout: \${data}\`);
});

ls.stderr.on('data', (data) => {
  console.error(\`stderr: \${data}\`);
});

ls.on('close', (code) => {
  console.log(\`Process exited with code \${code}\`);
});
`);

// Example 2: Spawn with options
console.log("// spawn with options");
console.log(`
const child = spawn('npm', ['install'], {
  cwd: '/path/to/project',      // Working directory
  env: {                        // Environment variables
    ...process.env,
    NODE_ENV: 'production'
  },
  shell: true,                  // Use shell (needed for shell features)
  detached: false,              // Run independently of parent
  stdio: 'pipe'                 // stdin/stdout/stderr configuration
});
`);

// Example 3: Piping between processes
console.log("// Piping spawn processes (like shell |)");
console.log(`
// Equivalent to: ps aux | grep node
const ps = spawn('ps', ['aux']);
const grep = spawn('grep', ['node']);

ps.stdout.pipe(grep.stdin);

grep.stdout.on('data', (data) => {
  console.log(data.toString());
});

ps.stderr.on('data', (data) => {
  console.error('ps error:', data.toString());
});

grep.on('close', (code) => {
  console.log('grep exited with code', code);
});
`);

// Demonstrate spawn
console.log("\n=== Live spawn Demo ===");
const echo = spawn('echo', ['Hello from spawn!']);
echo.stdout.on('data', (data) => {
  console.log(`  Output: ${data.toString().trim()}`);
});


/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *                              EXEC
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

console.log("\n" + "â•".repeat(70));
console.log("3ï¸âƒ£  exec() - BUFFERED OUTPUT WITH SHELL\n");

/**
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                         exec() ARCHITECTURE                                â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚                                                                            â”‚
 * â”‚   Node.js Process                                                          â”‚
 * â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
 * â”‚   â”‚                                                                    â”‚   â”‚
 * â”‚   â”‚  exec('ls -la | grep node', callback)                             â”‚   â”‚
 * â”‚   â”‚              â”‚                                                     â”‚   â”‚
 * â”‚   â”‚              â–¼                                                     â”‚   â”‚
 * â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚   â”‚
 * â”‚   â”‚  â”‚              SHELL                      â”‚                       â”‚   â”‚
 * â”‚   â”‚  â”‚  /bin/sh -c "ls -la | grep node"       â”‚                       â”‚   â”‚
 * â”‚   â”‚  â”‚                                         â”‚                       â”‚   â”‚
 * â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”                  â”‚                       â”‚   â”‚
 * â”‚   â”‚  â”‚  â”‚ ls â”‚ â”€â”€â”€â”€ â”‚ grep â”‚ â”€â”€â”€â”€ output      â”‚                       â”‚   â”‚
 * â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”˜ pipe â””â”€â”€â”€â”€â”€â”€â”˜                  â”‚                       â”‚   â”‚
 * â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚   â”‚
 * â”‚   â”‚              â”‚                                                     â”‚   â”‚
 * â”‚   â”‚              â–¼                                                     â”‚   â”‚
 * â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚   â”‚
 * â”‚   â”‚  â”‚     BUFFER (collects all output)        â”‚                       â”‚   â”‚
 * â”‚   â”‚  â”‚     maxBuffer: 1MB (default)           â”‚                       â”‚   â”‚
 * â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚   â”‚
 * â”‚   â”‚              â”‚                                                     â”‚   â”‚
 * â”‚   â”‚              â–¼                                                     â”‚   â”‚
 * â”‚   â”‚  callback(error, stdout, stderr)                                  â”‚   â”‚
 * â”‚   â”‚                                                                    â”‚   â”‚
 * â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
 * â”‚                                                                            â”‚
 * â”‚   Key Features:                                                            â”‚
 * â”‚   â€¢ Runs through shell (can use pipes, redirects, etc.)                   â”‚
 * â”‚   â€¢ Buffers entire output (NOT suitable for large output)                 â”‚
 * â”‚   â€¢ Convenient callback interface                                          â”‚
 * â”‚   â€¢ âš ï¸ Shell injection risk if using user input!                         â”‚
 * â”‚                                                                            â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */

console.log("=== exec() Examples ===\n");

console.log(`
const { exec } = require('child_process');

// Basic exec
exec('ls -la', (error, stdout, stderr) => {
  if (error) {
    console.error('Error:', error.message);
    return;
  }
  if (stderr) {
    console.error('stderr:', stderr);
  }
  console.log('Output:', stdout);
});

// With shell features (pipes, redirects)
exec('ps aux | grep node | wc -l', (error, stdout, stderr) => {
  console.log('Node processes count:', stdout.trim());
});

// With options
exec('npm run build', {
  cwd: '/path/to/project',
  env: { ...process.env, NODE_ENV: 'production' },
  maxBuffer: 10 * 1024 * 1024,  // 10MB buffer
  timeout: 60000,               // 60 second timeout
  killSignal: 'SIGTERM'
}, callback);

// Promise wrapper
const { promisify } = require('util');
const execAsync = promisify(exec);

async function runCommand() {
  try {
    const { stdout, stderr } = await execAsync('npm version');
    console.log(stdout);
  } catch (error) {
    console.error('Failed:', error.message);
  }
}
`);

// Live demo
console.log("=== Live exec Demo ===");
exec('echo "Hello from exec!" && echo "Shell features work!"', (error, stdout, stderr) => {
  if (error) {
    console.log(`  Error: ${error.message}`);
    return;
  }
  console.log(`  Output: ${stdout.trim().replace('\n', ', ')}`);
});


/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *                            EXECFILE
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

console.log("\n" + "â•".repeat(70));
console.log("4ï¸âƒ£  execFile() - DIRECT FILE EXECUTION\n");

/**
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                         execFile() vs exec()                               â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚                                                                            â”‚
 * â”‚   exec() with shell:                                                       â”‚
 * â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
 * â”‚   â”‚  Node.js â”€â–º /bin/sh -c "command args" â”€â–º command â”€â–º output    â”‚       â”‚
 * â”‚   â”‚                        â”‚                                       â”‚       â”‚
 * â”‚   â”‚                    Shell process                               â”‚       â”‚
 * â”‚   â”‚                    (extra overhead)                            â”‚       â”‚
 * â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
 * â”‚                                                                            â”‚
 * â”‚   execFile() without shell:                                               â”‚
 * â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
 * â”‚   â”‚  Node.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º command â”€â–º output      â”‚       â”‚
 * â”‚   â”‚                                                                â”‚       â”‚
 * â”‚   â”‚            Direct execution (no shell!)                        â”‚       â”‚
 * â”‚   â”‚            â€¢ More efficient                                    â”‚       â”‚
 * â”‚   â”‚            â€¢ More secure (no shell injection)                 â”‚       â”‚
 * â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
 * â”‚                                                                            â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */

console.log(`
const { execFile } = require('child_process');

// Direct file execution (no shell)
execFile('node', ['--version'], (error, stdout, stderr) => {
  console.log('Node version:', stdout.trim());
});

// More secure with user input
const userInput = 'some-file.txt'; // Could be malicious
execFile('cat', [userInput], (error, stdout) => {
  // Even if userInput is "; rm -rf /", it's treated as filename
  // NOT executed as shell command!
});

// Compare security:
// âŒ DANGEROUS with exec():
// exec(\`cat \${userInput}\`); // Shell injection possible!

// âœ… SAFE with execFile():
// execFile('cat', [userInput]); // Treated as literal argument
`);


/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *                              FORK
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

console.log("\n" + "â•".repeat(70));
console.log("5ï¸âƒ£  fork() - NODE.JS CHILD WITH IPC\n");

/**
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                         fork() ARCHITECTURE                                â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚                                                                            â”‚
 * â”‚   Parent Node.js Process              Child Node.js Process               â”‚
 * â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
 * â”‚   â”‚                      â”‚           â”‚                      â”‚             â”‚
 * â”‚   â”‚  const child =       â”‚           â”‚   // child.js        â”‚             â”‚
 * â”‚   â”‚  fork('child.js')    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   Node.js script     â”‚             â”‚
 * â”‚   â”‚                      â”‚  creates  â”‚                      â”‚             â”‚
 * â”‚   â”‚                      â”‚           â”‚                      â”‚             â”‚
 * â”‚   â”‚  child.send(msg) â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–º process.on('msg')  â”‚             â”‚
 * â”‚   â”‚                      â”‚    IPC    â”‚                      â”‚             â”‚
 * â”‚   â”‚  child.on('message') â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€ process.send(msg)  â”‚             â”‚
 * â”‚   â”‚                      â”‚  Channel  â”‚                      â”‚             â”‚
 * â”‚   â”‚                      â”‚           â”‚                      â”‚             â”‚
 * â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
 * â”‚                                                                            â”‚
 * â”‚   fork() is specialized spawn() for Node.js scripts:                       â”‚
 * â”‚   â€¢ Automatically sets up IPC channel                                      â”‚
 * â”‚   â€¢ Uses same Node.js executable                                           â”‚
 * â”‚   â€¢ Enables send()/on('message') communication                            â”‚
 * â”‚   â€¢ Each child has separate V8 instance (not shared memory)               â”‚
 * â”‚                                                                            â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */

console.log(`
// parent.js
const { fork } = require('child_process');

const child = fork('./worker.js');

// Send message to child
child.send({ type: 'task', data: [1, 2, 3, 4, 5] });

// Receive message from child
child.on('message', (result) => {
  console.log('Result from child:', result);
});

child.on('exit', (code) => {
  console.log('Child exited with code:', code);
});

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// worker.js (child process)
process.on('message', (msg) => {
  if (msg.type === 'task') {
    // Process the task
    const sum = msg.data.reduce((a, b) => a + b, 0);

    // Send result back to parent
    process.send({ type: 'result', sum });
  }
});

// Handle disconnect
process.on('disconnect', () => {
  console.log('Parent disconnected');
  process.exit(0);
});
`);

// Demonstrate fork difference from spawn
console.log("\n=== fork() vs spawn() for Node.js ===");
console.log(`
// spawn for Node.js (manual setup)
const child1 = spawn('node', ['worker.js']);
// No built-in IPC, communicate via stdio

// fork for Node.js (automatic IPC)
const child2 = fork('worker.js');
// Built-in IPC channel: child2.send() and child2.on('message')
`);


/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *                           STDIO CONFIGURATION
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

console.log("\n" + "â•".repeat(70));
console.log("6ï¸âƒ£  STDIO CONFIGURATION\n");

/**
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                      STDIO OPTIONS                                         â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚                                                                            â”‚
 * â”‚  stdio: 'pipe' (default)                                                  â”‚
 * â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
 * â”‚  â”‚   Parent   â”‚  pipe  â”‚   Child    â”‚                                     â”‚
 * â”‚  â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚                                     â”‚
 * â”‚  â”‚ child.stdinâ”‚        â”‚stdin       â”‚                                     â”‚
 * â”‚  â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”‚stdout      â”‚                                     â”‚
 * â”‚  â”‚child.stdoutâ”‚        â”‚            â”‚                                     â”‚
 * â”‚  â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”‚stderr      â”‚                                     â”‚
 * â”‚  â”‚child.stderrâ”‚        â”‚            â”‚                                     â”‚
 * â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
 * â”‚                                                                            â”‚
 * â”‚  stdio: 'inherit'                                                         â”‚
 * â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
 * â”‚  â”‚   Parent   â”‚        â”‚   Child    â”‚                                     â”‚
 * â”‚  â”‚            â”‚ same   â”‚            â”‚                                     â”‚
 * â”‚  â”‚ stdin â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€ stdin    â”‚  All stdio shared                   â”‚
 * â”‚  â”‚ stdout â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€ stdout   â”‚  with parent!                       â”‚
 * â”‚  â”‚ stderr â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€ stderr   â”‚                                     â”‚
 * â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
 * â”‚                                                                            â”‚
 * â”‚  stdio: 'ignore'                                                          â”‚
 * â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
 * â”‚  â”‚   Parent   â”‚        â”‚   Child    â”‚                                     â”‚
 * â”‚  â”‚            â”‚  X     â”‚            â”‚                                     â”‚
 * â”‚  â”‚            â”‚        â”‚ /dev/null  â”‚  All stdio discarded                â”‚
 * â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
 * â”‚                                                                            â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */

console.log(`
// stdio options
const options = {
  // String shortcuts
  stdio: 'pipe',      // ['pipe', 'pipe', 'pipe'] - default, streams available
  stdio: 'inherit',   // ['inherit', 'inherit', 'inherit'] - share with parent
  stdio: 'ignore',    // ['ignore', 'ignore', 'ignore'] - discard

  // Array for fine-grained control [stdin, stdout, stderr, ...]
  stdio: ['pipe', 'pipe', 'pipe'],  // Same as 'pipe'
  stdio: ['pipe', 'inherit', 'inherit'],  // Pipe stdin, share stdout/stderr
  stdio: ['ignore', 'pipe', 'pipe'],  // No stdin, capture output

  // Advanced: IPC channel
  stdio: ['pipe', 'pipe', 'pipe', 'ipc'],  // Add IPC channel (4th fd)
};

// Examples

// 1. Inherit all - child output goes directly to terminal
spawn('npm', ['install'], { stdio: 'inherit' });

// 2. Silent - discard all output
spawn('npm', ['install'], { stdio: 'ignore' });

// 3. Capture stdout only, show stderr
spawn('npm', ['run', 'build'], {
  stdio: ['ignore', 'pipe', 'inherit']
});

// 4. Multiple custom streams
const fs = require('fs');
const out = fs.openSync('./out.log', 'a');
const err = fs.openSync('./err.log', 'a');

spawn('npm', ['run', 'build'], {
  stdio: ['ignore', out, err]  // Log to files
});
`);


/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *                        DETACHED PROCESSES
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

console.log("\n" + "â•".repeat(70));
console.log("7ï¸âƒ£  DETACHED PROCESSES (BACKGROUND)\n");

/**
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                    DETACHED PROCESS                                        â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚                                                                            â”‚
 * â”‚   Normal Process:                                                          â”‚
 * â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
 * â”‚   â”‚   Parent   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚   Child    â”‚                                    â”‚
 * â”‚   â”‚            â”‚  tied  â”‚            â”‚                                    â”‚
 * â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
 * â”‚   Parent exits â†’ Child also terminates                                    â”‚
 * â”‚                                                                            â”‚
 * â”‚   Detached Process:                                                        â”‚
 * â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
 * â”‚   â”‚   Parent   â”‚  â•³     â”‚   Child    â”‚                                    â”‚
 * â”‚   â”‚            â”‚        â”‚            â”‚                                    â”‚
 * â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
 * â”‚   Parent exits â†’ Child continues running!                                 â”‚
 * â”‚                                                                            â”‚
 * â”‚   Use cases:                                                               â”‚
 * â”‚   â€¢ Long-running background services                                      â”‚
 * â”‚   â€¢ Processes that should outlive the parent                              â”‚
 * â”‚   â€¢ Daemon processes                                                       â”‚
 * â”‚                                                                            â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */

console.log(`
// Create detached background process

const { spawn } = require('child_process');
const fs = require('fs');

// Open files for stdout/stderr (since process is detached)
const out = fs.openSync('./daemon.log', 'a');
const err = fs.openSync('./daemon-error.log', 'a');

const daemon = spawn('node', ['long-running-service.js'], {
  detached: true,        // Run independently of parent
  stdio: ['ignore', out, err]  // Don't use parent's stdio
});

// Allow parent to exit without waiting for child
daemon.unref();

console.log('Daemon started with PID:', daemon.pid);
console.log('Parent can now exit...');
process.exit(0);

// Child continues running as independent process!
`);


/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *                    ERROR HANDLING & SIGNALS
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

console.log("â•".repeat(70));
console.log("8ï¸âƒ£  ERROR HANDLING & SIGNALS\n");

console.log(`
// Comprehensive error handling

const { spawn } = require('child_process');

const child = spawn('some-command', ['args']);

// Error: Failed to spawn process (command not found, etc.)
child.on('error', (err) => {
  console.error('Failed to start process:', err.message);
  // err.code: 'ENOENT' (command not found)
  //          'EACCES' (permission denied)
});

// Exit: Process exited (normally or abnormally)
child.on('exit', (code, signal) => {
  if (code !== null) {
    console.log('Process exited with code:', code);
    // code 0 = success
    // code > 0 = error
  }
  if (signal !== null) {
    console.log('Process killed by signal:', signal);
    // 'SIGTERM', 'SIGKILL', 'SIGINT', etc.
  }
});

// Close: All stdio streams closed
child.on('close', (code, signal) => {
  // Safe to assume all output has been received
  console.log('All streams closed, code:', code);
});

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// Sending signals to child

child.kill();           // Default: SIGTERM (graceful)
child.kill('SIGTERM');  // Request termination
child.kill('SIGKILL');  // Force kill (cannot be caught)
child.kill('SIGINT');   // Interrupt (like Ctrl+C)
child.kill('SIGUSR1');  // User-defined signal

// Check if process is still running
console.log('Connected:', child.connected);
console.log('Killed:', child.killed);

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// Timeout handling
const child = spawn('slow-command');

const timeout = setTimeout(() => {
  child.kill('SIGTERM');
  console.log('Process timed out');
}, 30000);

child.on('exit', () => {
  clearTimeout(timeout);
});
`);


/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *                    SECURITY CONSIDERATIONS
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

console.log("\n" + "â•".repeat(70));
console.log("9ï¸âƒ£  SECURITY CONSIDERATIONS\n");

console.log(`
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SHELL INJECTION PREVENTION                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  âŒ DANGEROUS - Shell injection vulnerability:                              â”‚
â”‚                                                                              â”‚
â”‚  const userInput = req.query.filename;                                      â”‚
â”‚  exec(\`cat \${userInput}\`);  // User could input: "; rm -rf /"           â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                              â”‚
â”‚  âœ… SAFE - Use array arguments with spawn/execFile:                         â”‚
â”‚                                                                              â”‚
â”‚  const userInput = req.query.filename;                                      â”‚
â”‚  execFile('cat', [userInput]);  // Treated as literal filename              â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                              â”‚
â”‚  âœ… SAFE - Validate and sanitize input:                                     â”‚
â”‚                                                                              â”‚
â”‚  const allowedFiles = ['file1.txt', 'file2.txt'];                           â”‚
â”‚  if (!allowedFiles.includes(userInput)) {                                   â”‚
â”‚    throw new Error('Invalid file');                                         â”‚
â”‚  }                                                                           â”‚
â”‚  execFile('cat', [userInput]);                                              â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                              â”‚
â”‚  âœ… SAFE - Use shell-escape library if exec is necessary:                   â”‚
â”‚                                                                              â”‚
â”‚  const shellEscape = require('shell-escape');                               â”‚
â”‚  const safeCmd = shellEscape(['cat', userInput]);                           â”‚
â”‚  exec(safeCmd);                                                             â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`);


/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *                    PRACTICAL PATTERNS
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

console.log("â•".repeat(70));
console.log("ğŸ”Ÿ  PRACTICAL PATTERNS\n");

console.log(`
// Pattern 1: Run shell command and get output

const { promisify } = require('util');
const exec = promisify(require('child_process').exec);

async function runCommand(cmd) {
  try {
    const { stdout, stderr } = await exec(cmd);
    return { success: true, stdout, stderr };
  } catch (error) {
    return { success: false, error: error.message };
  }
}

// Pattern 2: Stream large output

function streamOutput(command, args) {
  return new Promise((resolve, reject) => {
    const child = spawn(command, args);
    let output = '';

    child.stdout.on('data', (data) => {
      output += data;
      process.stdout.write(data); // Also print in real-time
    });

    child.on('error', reject);
    child.on('close', (code) => {
      if (code === 0) resolve(output);
      else reject(new Error(\`Exit code: \${code}\`));
    });
  });
}

// Pattern 3: Worker pool with fork

class WorkerPool {
  constructor(workerPath, size) {
    this.workers = [];
    this.queue = [];

    for (let i = 0; i < size; i++) {
      this.addWorker(workerPath);
    }
  }

  addWorker(path) {
    const worker = fork(path);
    worker.busy = false;

    worker.on('message', (result) => {
      worker.currentResolve(result);
      worker.busy = false;
      this.processQueue();
    });

    this.workers.push(worker);
  }

  exec(task) {
    return new Promise((resolve, reject) => {
      const freeWorker = this.workers.find(w => !w.busy);

      if (freeWorker) {
        freeWorker.busy = true;
        freeWorker.currentResolve = resolve;
        freeWorker.send(task);
      } else {
        this.queue.push({ task, resolve, reject });
      }
    });
  }

  processQueue() {
    if (this.queue.length === 0) return;

    const freeWorker = this.workers.find(w => !w.busy);
    if (freeWorker) {
      const { task, resolve } = this.queue.shift();
      freeWorker.busy = true;
      freeWorker.currentResolve = resolve;
      freeWorker.send(task);
    }
  }
}

// Pattern 4: Run Python script

function runPython(scriptPath, args = []) {
  return new Promise((resolve, reject) => {
    const python = spawn('python3', [scriptPath, ...args]);
    let output = '';
    let error = '';

    python.stdout.on('data', (data) => output += data);
    python.stderr.on('data', (data) => error += data);

    python.on('close', (code) => {
      if (code === 0) resolve(output);
      else reject(new Error(error || \`Exit code: \${code}\`));
    });
  });
}

// Usage:
// const result = await runPython('./script.py', ['--arg1', 'value']);
`);


/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *                        INTERVIEW QUESTIONS
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

console.log("\n" + "â•".repeat(70));
console.log("ğŸ“‹  CHILD PROCESSES - INTERVIEW QUESTIONS\n");

console.log(`
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Q1: What's the difference between spawn() and exec()?                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ A: spawn():                                                                  â”‚
â”‚    â€¢ Does NOT use shell by default                                          â”‚
â”‚    â€¢ Returns stream (stdout/stderr as streams)                              â”‚
â”‚    â€¢ Better for large output (memory efficient)                             â”‚
â”‚    â€¢ Better for long-running processes                                      â”‚
â”‚                                                                              â”‚
â”‚    exec():                                                                   â”‚
â”‚    â€¢ Uses shell (/bin/sh -c)                                                â”‚
â”‚    â€¢ Returns buffered output (string)                                       â”‚
â”‚    â€¢ Has maxBuffer limit (default 1MB)                                      â”‚
â”‚    â€¢ Can use shell features (pipes, redirects)                              â”‚
â”‚    â€¢ âš ï¸ Shell injection vulnerability with user input                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Q2: What is fork() and when should you use it?                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ A: fork() is a special spawn() for Node.js scripts that:                    â”‚
â”‚    â€¢ Automatically creates IPC channel                                      â”‚
â”‚    â€¢ Enables send()/on('message') communication                             â”‚
â”‚    â€¢ Spawns new Node.js process                                             â”‚
â”‚                                                                              â”‚
â”‚    Use fork() when:                                                          â”‚
â”‚    â€¢ Running Node.js scripts in separate processes                          â”‚
â”‚    â€¢ Need bidirectional communication                                       â”‚
â”‚    â€¢ Offloading CPU-intensive tasks                                         â”‚
â”‚    â€¢ Implementing worker pools                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Q3: How do you prevent shell injection attacks?                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ A: 1. Use execFile() or spawn() instead of exec()                           â”‚
â”‚       - Pass arguments as array, not interpolated string                    â”‚
â”‚       - Arguments are treated literally, not parsed by shell                â”‚
â”‚                                                                              â”‚
â”‚    2. Validate and whitelist user input                                     â”‚
â”‚       - Check against allowed values                                        â”‚
â”‚       - Reject unexpected characters                                        â”‚
â”‚                                                                              â”‚
â”‚    3. Never interpolate user input into exec() commands                     â”‚
â”‚       âŒ exec(\`cat \${userInput}\`)                                        â”‚
â”‚       âœ… execFile('cat', [userInput])                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Q4: Difference between 'exit' and 'close' events?                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ A: 'exit' event:                                                             â”‚
â”‚    â€¢ Fired when process terminates                                          â”‚
â”‚    â€¢ stdio streams may still be open                                        â”‚
â”‚    â€¢ Provides exit code and signal                                          â”‚
â”‚                                                                              â”‚
â”‚    'close' event:                                                            â”‚
â”‚    â€¢ Fired when ALL stdio streams are closed                                â”‚
â”‚    â€¢ Safe to assume all output has been received                            â”‚
â”‚    â€¢ Always comes after or with 'exit'                                      â”‚
â”‚                                                                              â”‚
â”‚    Best practice: Use 'close' when you need all output.                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Q5: How do you create a background/daemon process?                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ A: Use detached: true option with spawn():                                   â”‚
â”‚                                                                              â”‚
â”‚    const child = spawn('node', ['daemon.js'], {                             â”‚
â”‚      detached: true,                  // Independent of parent              â”‚
â”‚      stdio: ['ignore', out, err]      // Don't use parent's stdio          â”‚
â”‚    });                                                                       â”‚
â”‚                                                                              â”‚
â”‚    child.unref();  // Allow parent to exit                                  â”‚
â”‚                                                                              â”‚
â”‚    The child process continues running even after parent exits.             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Q6: Child Processes vs Worker Threads vs Cluster?                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ A: Child Processes (child_process module):                                   â”‚
â”‚    â€¢ Run any external command/program                                       â”‚
â”‚    â€¢ Completely separate processes                                          â”‚
â”‚    â€¢ Best for: external programs, shell commands                            â”‚
â”‚                                                                              â”‚
â”‚    Worker Threads (worker_threads module):                                   â”‚
â”‚    â€¢ JavaScript threads within same process                                 â”‚
â”‚    â€¢ Can share memory (SharedArrayBuffer)                                   â”‚
â”‚    â€¢ Best for: CPU-intensive JS tasks                                       â”‚
â”‚                                                                              â”‚
â”‚    Cluster (cluster module):                                                 â”‚
â”‚    â€¢ Multiple Node.js processes sharing port                                â”‚
â”‚    â€¢ Automatic load balancing                                               â”‚
â”‚    â€¢ Best for: scaling HTTP servers                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
`);


/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *                           CHEAT SHEET
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

console.log("â•".repeat(70));
console.log("ğŸ“  CHILD PROCESSES CHEAT SHEET\n");

console.log(`
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     CHILD PROCESSES QUICK REFERENCE                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                            â•‘
â•‘  Import:                                                                   â•‘
â•‘    const { spawn, exec, execFile, fork } = require('child_process');      â•‘
â•‘                                                                            â•‘
â•‘  spawn(cmd, args, options):                                                â•‘
â•‘    â€¢ No shell, streaming output                                           â•‘
â•‘    â€¢ child.stdout, child.stderr (Readable streams)                        â•‘
â•‘    â€¢ child.stdin (Writable stream)                                        â•‘
â•‘                                                                            â•‘
â•‘  exec(cmd, options, callback):                                             â•‘
â•‘    â€¢ Uses shell, buffered output                                          â•‘
â•‘    â€¢ callback(error, stdout, stderr)                                      â•‘
â•‘    â€¢ Shell features: pipes, redirects, etc.                               â•‘
â•‘                                                                            â•‘
â•‘  execFile(file, args, options, callback):                                  â•‘
â•‘    â€¢ No shell, direct file execution                                      â•‘
â•‘    â€¢ More secure than exec()                                              â•‘
â•‘                                                                            â•‘
â•‘  fork(modulePath, args, options):                                          â•‘
â•‘    â€¢ Node.js scripts only                                                  â•‘
â•‘    â€¢ Built-in IPC: child.send(), child.on('message')                      â•‘
â•‘                                                                            â•‘
â•‘  Common Options:                                                           â•‘
â•‘    cwd: '/path'           // Working directory                            â•‘
â•‘    env: { ... }           // Environment variables                        â•‘
â•‘    shell: true/false      // Use shell (spawn)                            â•‘
â•‘    stdio: 'pipe'|'inherit'|'ignore'                                       â•‘
â•‘    detached: true         // Run independently                            â•‘
â•‘    timeout: 30000         // Timeout in ms                                â•‘
â•‘                                                                            â•‘
â•‘  Events:                                                                   â•‘
â•‘    'error'   // Failed to spawn                                           â•‘
â•‘    'exit'    // Process exited                                            â•‘
â•‘    'close'   // All stdio closed                                          â•‘
â•‘    'message' // IPC message (fork)                                        â•‘
â•‘                                                                            â•‘
â•‘  Methods:                                                                  â•‘
â•‘    child.kill([signal])   // Send signal (default: SIGTERM)               â•‘
â•‘    child.send(msg)        // IPC message (fork)                           â•‘
â•‘    child.disconnect()     // Close IPC channel                            â•‘
â•‘    child.unref()          // Allow parent to exit                         â•‘
â•‘                                                                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
`);

console.log("\nâ•â•â• FILE 7 COMPLETE â•â•â•");
console.log("Run: node 08-interview-qa.js");
